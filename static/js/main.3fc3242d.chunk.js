(this["webpackJsonpreact-quiz-game"]=this["webpackJsonpreact-quiz-game"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),i=n.n(a),o=n(9),s=n.n(o),u=n(2),j=n(3);!function(e){e.Standard="STANDARD",e.Time="TIME",e.Marathon="MARATHON"}(c||(c={})),function(e){e.Main_Menu="Main_Menu",e.Options="Options",e.Quiz="Quiz"}(r||(r={}));var b=n(0),l=i.a.createContext(null),d=function(){return Object(a.useContext)(l)},O=function(e){var t=e.children,n=Object(a.useState)(r.Main_Menu),i=Object(j.a)(n,2),o=i[0],s=i[1],d=Object(a.useState)({category:"",difficulty:"",type:"",amount:10}),O=Object(j.a)(d,2),h=O[0],f=O[1],p=Object(a.useState)("https://opentdb.com/api.php?amount=10&encode=url3986"),x=Object(j.a)(p,2),v=x[0],m=x[1],g=Object(a.useState)(c.Standard),y=Object(j.a)(g,2),w=y[0],M=y[1],S=function(e){var t={};e.category&&(t=Object(u.a)(Object(u.a)({},t),{},{category:e.category})),e.difficulty&&(t=Object(u.a)(Object(u.a)({},t),{},{difficulty:e.difficulty})),e.type&&(t=Object(u.a)(Object(u.a)({},t),{},{type:e.type})),t=Object(u.a)(Object(u.a)({},t),{},{amount:e.amount}),t=Object(u.a)(Object(u.a)({},t),{},{encode:"url3986"});var n=new URLSearchParams(t);return console.log("https://opentdb.com/api.php?".concat(n)),"https://opentdb.com/api.php?".concat(n)};return Object(b.jsx)(l.Provider,{value:{activeComponent:o,gameOptions:h,fetchURL:v,gameMode:w,navigateToMainMenu:function(){s(r.Main_Menu)},navigateToOptions:function(){s(r.Options)},navigateToQuiz:function(e){s(r.Quiz),M(e),e===c.Marathon&&m(S(Object(u.a)(Object(u.a)({},h),{},{category:"",type:"multiple",amount:50})))},updateGameOptions:function(e){f(e),m(S(e))}},children:t})},h=function(){var e=d(),t=e.navigateToQuiz,n=e.navigateToOptions;return Object(b.jsxs)("section",{className:"main-menu",children:[Object(b.jsx)("h1",{children:"Trivia Quiz"}),Object(b.jsx)("button",{onClick:function(){return t(c.Standard)},children:"Standard"}),Object(b.jsx)("button",{onClick:function(){return t(c.Time)},children:"Timed"}),Object(b.jsx)("button",{onClick:function(){return t(c.Marathon)},children:"Marathon"}),Object(b.jsx)("button",{onClick:n,children:"Options"})]})},f=n(8),p=n.n(f),x=n(10),v=function(e,t){var n=Object(a.useRef)({}),c=Object(a.useRef)(!1),r={error:void 0,data:void 0},i=Object(a.useReducer)((function(e,t){switch(t.type){case"loading":return Object(u.a)({},r);case"fetched":return Object(u.a)(Object(u.a)({},r),{},{data:t.payload});case"error":return Object(u.a)(Object(u.a)({},r),{},{error:t.payload});default:return e}}),r),o=Object(j.a)(i,2),s=o[0],b=o[1];return Object(a.useEffect)((function(){if(e){var r=function(){var r=Object(x.a)(p.a.mark((function r(){var a,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(b({type:"loading"}),!n.current[e]){r.next=4;break}return b({type:"fetched",payload:n.current[e]}),r.abrupt("return");case 4:return r.prev=4,r.next=7,fetch(e,t);case 7:if((a=r.sent).ok){r.next=10;break}throw new Error(a.statusText);case 10:return r.next=12,a.json();case 12:if(i=r.sent,n.current[e]=i,!c.current){r.next=16;break}return r.abrupt("return");case 16:b({type:"fetched",payload:i}),r.next=24;break;case 19:if(r.prev=19,r.t0=r.catch(4),!c.current){r.next=23;break}return r.abrupt("return");case 23:b({type:"error",payload:r.t0});case 24:case"end":return r.stop()}}),r,null,[[4,19]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){c.current=!0}}}),[e]),s},m=function(){var e=v("https://opentdb.com/api_category.php"),t=e.data,n=(e.error,d()),c=n.gameOptions,r=n.navigateToMainMenu,i=n.updateGameOptions,o=Object(a.useState)(c),s=Object(j.a)(o,2),l=s[0],O=s[1];return Object(b.jsxs)("section",{className:"mode-options",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"categories",children:"Select Category"}),Object(b.jsxs)("select",{id:"categories",value:l.category,onChange:function(e){return O(Object(u.a)(Object(u.a)({},l),{},{category:e.target.value}))},children:[Object(b.jsx)("option",{value:"",children:"Any Category"}),t&&t.trivia_categories.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"difficulty",children:"Select Difficulty"}),Object(b.jsxs)("select",{id:"difficulty",value:l.difficulty,onChange:function(e){return O(Object(u.a)(Object(u.a)({},l),{},{difficulty:e.target.value}))},children:[Object(b.jsx)("option",{value:"",children:"Any Difficulty"}),Object(b.jsx)("option",{value:"easy",children:"Easy"}),Object(b.jsx)("option",{value:"medium",children:"Medium"}),Object(b.jsx)("option",{value:"hard",children:"Hard"})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"type",children:"Select Type"}),Object(b.jsxs)("select",{id:"type",value:l.type,onChange:function(e){return O(Object(u.a)(Object(u.a)({},l),{},{type:e.target.value}))},children:[Object(b.jsx)("option",{value:"",children:"Any Type"}),Object(b.jsx)("option",{value:"multiple",children:"Multiple Choice"}),Object(b.jsx)("option",{value:"boolean",children:"True / False"})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"number",children:"Select Number of Questions"}),Object(b.jsxs)("select",{id:"number",value:l.amount,onChange:function(e){return O(Object(u.a)(Object(u.a)({},l),{},{amount:parseInt(e.target.value)}))},children:[Object(b.jsx)("option",{value:10,children:"10"}),Object(b.jsx)("option",{value:15,children:"15"}),Object(b.jsx)("option",{value:20,children:"20"})]})]}),Object(b.jsx)("button",{onClick:function(){i(l),r()},children:"Back"})]})},g=n(4),y=function(e,t){var n=v(e,t),c=n.data,r=n.error,i=Object(a.useState)(),o=Object(j.a)(i,2),s=o[0],b=o[1];return Object(a.useEffect)((function(){if(c){var e=c.results.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{category:decodeURIComponent(e.category),question:decodeURIComponent(e.question),correct_answer:decodeURIComponent(e.correct_answer),incorrect_answers:e.incorrect_answers.map((function(e){return decodeURIComponent(e)}))})}));b(e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{shuffled_answers:(t=[].concat(Object(g.a)(e.incorrect_answers),[e.correct_answer]),Object(g.a)(t).sort((function(){return Math.random()-.5})))});var t})))}}),[c]),[s,r]},w=function(e){var t,n=e.question,c=e.userAnswer,r=e.callback;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:n.question}),null===(t=n.shuffled_answers)||void 0===t?void 0:t.map((function(e,t){return Object(b.jsx)("button",{value:e,disabled:!!c,onClick:function(e){return r(e.currentTarget.value)},children:e},t)}))]})},M=function(e){var t=e.score,n=e.userAnswers;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Your Final Score"}),Object(b.jsx)("h3",{children:t}),n.map((function(e,t){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{children:["Question:- ",e.question]}),Object(b.jsxs)("h4",{children:["Your Answer:- ",e.answer]}),Object(b.jsxs)("h4",{children:["Correct Answer:- ",e.correctAnswer]})]},t)}))]})},S=function(e,t){var n=Object(a.useState)(e),c=Object(j.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(!1),s=Object(j.a)(o,2),u=s[0],b=s[1],l=Object(a.useRef)(),d=Object(a.useRef)(),O=function(){b(!1)};return Object(a.useEffect)((function(){d.current=t}),[t]),Object(a.useEffect)((function(){return u&&(l.current=window.setInterval((function(){var e=r-1;e>=0?i(e):(d.current&&d.current(),O())}),1e3)),function(){return window.clearInterval(l.current)}}),[u,r]),[r,u,function(){b(!0)},O,function(){i(e),b(!1)}]},k=function(e){var t=e.url,n=e.mode,r=y(t),i=Object(j.a)(r,2),o=i[0],s=i[1],u=Object(a.useState)(0),l=Object(j.a)(u,2),O=l[0],h=l[1],f=Object(a.useState)(0),p=Object(j.a)(f,2),x=p[0],v=p[1],m=Object(a.useState)(!1),k=Object(j.a)(m,2),C=k[0],T=k[1],A=Object(a.useState)([]),_=Object(j.a)(A,2),R=_[0],q=_[1],E=S(20,(function(){return H("")})),z=Object(j.a)(E,5),I=z[0],N=z[1],Q=z[2],U=(z[3],z[4]),F=Object(a.useState)(5),D=Object(j.a)(F,2),L=D[0],B=D[1],G=d().navigateToMainMenu,H=function(e){if(o){var t=o[O].correct_answer===e;if(t&&P(),!t&&n===c.Marathon){var r=L-1;r>=0?B(r):T(!0)}var a={question:o[O].question,answer:e,correct:t,correctAnswer:o[O].correct_answer};q((function(e){return[].concat(Object(g.a)(e),[a])})),setTimeout((function(){J()}),500)}},J=function(){var e=O+1;o&&e<o.length?h(e):T(!0)},P=function(){switch(n){case c.Standard:v((function(e){return e+1}));break;case c.Time:v((function(e){return e+Math.max(0,I)}));break;case c.Marathon:v((function(e){return e+5*L}));break;default:throw new Error("No matching mode found!")}};return Object(a.useEffect)((function(){n!==c.Time||N||(U(),Q())}),[O]),s?Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:s.message})}):o?C?Object(b.jsxs)("div",{children:[Object(b.jsx)(M,{score:x,userAnswers:R}),Object(b.jsx)("button",{onClick:G,children:"Back"})]}):n===c.Standard?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:[O+1," / ",o.length]}),Object(b.jsxs)("h4",{children:["Score:- ",x]}),Object(b.jsx)(w,{question:o[O],userAnswer:R[O],callback:H})]}):n===c.Time?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:[O+1," / ",o.length]}),Object(b.jsxs)("h4",{children:["Score:- ",x]}),Object(b.jsx)("div",{className:"progressbar-container",children:Object(b.jsx)("div",{className:"progressbar-filler",children:Object(b.jsx)("span",{className:"progressbar-label",children:I})})}),Object(b.jsx)(w,{question:o[O],userAnswer:R[O],callback:H})]}):n===c.Marathon?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:[O+1," / ",o.length]}),Object(b.jsxs)("h4",{children:["Score:- ",x]}),Object(b.jsx)("h5",{children:L}),Object(b.jsx)(w,{question:o[O],userAnswer:R[O],callback:H})]}):Object(b.jsx)("div",{}):Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Loading..."})})};var C=function(){var e=d(),t=e.activeComponent,n=e.fetchURL,c=e.gameMode;return Object(b.jsxs)("main",{children:[t===r.Main_Menu&&Object(b.jsx)(h,{}),t===r.Options&&Object(b.jsx)(m,{}),t===r.Quiz&&Object(b.jsx)(k,{url:n,mode:c})]})};n(17);s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(C,{})})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3fc3242d.chunk.js.map